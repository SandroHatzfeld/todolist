var dn=Object.defineProperty;var vt=n=>{throw TypeError(n)};var un=(n,e,t)=>e in n?dn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Le=(n,e,t)=>un(n,typeof e!="symbol"?e+"":e,t),Et=(n,e,t)=>e.has(n)||vt("Cannot "+t);var $=(n,e,t)=>(Et(n,e,"read from private field"),t?t.call(n):e.get(n)),ee=(n,e,t)=>e.has(n)?vt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Ce=(n,e,t,o)=>(Et(n,e,"write to private field"),o?o.call(n,t):e.set(n,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function t(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=t(a);fetch(a.href,r)}})();class se{constructor(e,t,o,a){this.title=e,this.description=t,this.priority=o,this.dueDate=a,this.checked=!1}set state(e){this.checked=e}get state(){return this.checked}}var ye,ce;class Ge{constructor(e,t,o){ee(this,ye,[]);ee(this,ce,[]);Le(this,"updatePriority",(e,t)=>{$(this,ye).filter(o=>o.priority.name===$(this,ce)[t].name).map(o=>o.priority=e),$(this,ce)[t]=e});this.title=e,this.description=t,this.icon=o}set tasks(e){$(this,ye).push(e)}get tasks(){return $(this,ye)}set priorities(e){$(this,ce).push(e)}get priorities(){return $(this,ce)}}ye=new WeakMap,ce=new WeakMap;var le,Ie;class x{static set projects(e){$(this,le).push(e)}static get projects(){return $(this,le)}static set currentProject(e){Ce(this,Ie,e)}static get currentProject(){return $(this,le)[$(this,Ie)]}static removeProjectItem(e){$(this,le).splice(e,1)}}le=new WeakMap,Ie=new WeakMap,ee(x,le,[]),ee(x,Ie,0);const Dt="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Ebene_1'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%2030%2030'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.2.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.0%20Build%20108)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20stroke:%20%231d1d1b;%20}%20.st0,%20.st1%20{%20fill:%20none;%20stroke-linecap:%20round;%20stroke-miterlimit:%2010;%20stroke-width:%204px;%20}%20.st1%20{%20stroke:%20%23fff;%20}%20.st2%20{%20fill:%20%238ac11f;%20}%20%3c/style%3e%3c/defs%3e%3cpolyline%20class='st0'%20points='70.46%207.09%2057.47%2023.32%2050.82%2018.83'/%3e%3ccircle%20class='st2'%20cx='15'%20cy='15'%20r='15'/%3e%3cg%3e%3cline%20class='st1'%20x1='15'%20y1='6.88'%20x2='15'%20y2='23.12'/%3e%3cline%20class='st1'%20x1='23.12'%20y1='15'%20x2='6.88'%20y2='15'/%3e%3c/g%3e%3c/svg%3e";class it{static renderInputForm(){const e=document.createElement("div");e.classList.add("popup-wrapper"),e.addEventListener("click",a=>{a.currentTarget===a.target&&a.currentTarget.remove()});const t=document.createElement("form");t.innerHTML=`
			<h1>New Task</h1>
			<div class="popup-input-container">
				<label for="newTaskName">Name*</label>
				<input id="newTaskName">
			</div>
			<div class="popup-input-container">
				<label for="newTaskDescription">Description</label>
				<input id="newTaskDescription">
			</div>
			<div class="popup-input-container">
				<label for="newTaskPriority">Priority*</label>
				<select id="newTaskPriority">
					<option disabled selected hidden></option>

					${this.priorities.map(a=>`<option value="${a.name}" style="${a.color}">${a.name}</option>`).join("")}
				</select>
			</div>
			<div class="popup-input-container">
				<label for="newTaskDate">Due Date</label>
				<input id="newTaskDate" type="date">
			</div>
		`;const o=document.createElement("input");o.value="Add new Task",o.type="submit",o.addEventListener("click",a=>{if(a.preventDefault(),!t.checkValidity()){t.reportValidity();return}const r=document.querySelector("#newTaskName").value,s=document.querySelector("#newTaskDescription").value,u=document.querySelector("#newTaskPriority").value,p=document.querySelector("#newTaskDate").value,f=this.priorities.find(k=>k.name===u),h=new se(r,s,f,p);x.currentProject.tasks=h,H.renderToScreen(),document.querySelector("body").removeChild(e)}),t.appendChild(o),e.appendChild(t),document.querySelector("body").appendChild(e)}}Le(it,"priorities",[]);var Ae;class Nt{static renderStaticButton(){Ce(this,Ae,x.currentProject.priorities);const e=document.createElement("img");return e.classList.add("addTaskBtn"),e.classList.add("addBtn"),e.src=Dt,e.addEventListener("click",()=>{it.priorities=$(this,Ae),it.renderInputForm()}),e}}Ae=new WeakMap,ee(Nt,Ae,[]);var De;class Ot{static renderProjectsList(){Ce(this,De,x.projects);const e=document.createElement("div");return e.id="project-list",$(this,De).forEach((t,o)=>{const a=document.createElement("div");a.classList.add("project-item"),a.addEventListener("click",s=>{x.currentProject=o,H.renderToScreen()}),a.dataset.projectIndex=o,a.innerHTML=`<span>${t.icon} ${t.title}</span>`;const r=document.createElement("div");r.classList.add("project-item-remove"),r.addEventListener("click",()=>{x.currentProject=0,x.removeProjectItem(o),H.updateProjectList(),H.updateProjectPanel()}),a.appendChild(r),e.appendChild(a)}),e}}De=new WeakMap,ee(Ot,De,x.projects);const W=(()=>{/*!
* Copyright (c) 2021-2024 Momo Bassit.
* Licensed under the MIT License (MIT)
* https://github.com/mdbassit/Coloris
* Version: 0.24.0
* NPM: https://github.com/melloware/coloris-npm
*/return((n,e,t,o)=>{const a=e.createElement("canvas").getContext("2d"),r={r:0,g:0,b:0,h:0,s:0,v:0,a:1};let s,u,p,f,h,k,b,w,I,B,F,O,v,L,A,R,_={};const m={el:"[data-coloris]",parent:"body",theme:"default",themeMode:"light",rtl:!1,wrap:!0,margin:2,format:"hex",formatToggle:!1,swatches:[],swatchesOnly:!1,alpha:!0,forceAlpha:!1,focusInput:!0,selectInput:!1,inline:!1,defaultColor:"#000000",clearButton:!1,clearLabel:"Clear",closeButton:!1,closeLabel:"Close",onChange:()=>o,a11y:{open:"Open color picker",close:"Close color picker",clear:"Clear the selected color",marker:"Saturation: {s}. Brightness: {v}.",hueSlider:"Hue slider",alphaSlider:"Opacity slider",input:"Color value field",format:"Color format",swatch:"Color swatch",instruction:"Saturation and brightness selector. Use up, down, left and right arrow keys to select."}},te={};let ve="",X={},ne=!1;function pe(i){if(typeof i=="object")for(const l in i)switch(l){case"el":je(i.el),i.wrap!==!1&&oe(i.el);break;case"parent":s=i.parent instanceof HTMLElement?i.parent:e.querySelector(i.parent),s&&(s.appendChild(u),m.parent=i.parent,s===e.body&&(s=o));break;case"themeMode":m.themeMode=i.themeMode,i.themeMode==="auto"&&n.matchMedia&&n.matchMedia("(prefers-color-scheme: dark)").matches&&(m.themeMode="dark");case"theme":i.theme&&(m.theme=i.theme),u.className="clr-picker clr-"+m.theme+" clr-"+m.themeMode,m.inline&&re();break;case"rtl":m.rtl=!!i.rtl,Array.from(e.getElementsByClassName("clr-field")).forEach(E=>E.classList.toggle("clr-rtl",m.rtl));break;case"margin":i.margin*=1,m.margin=isNaN(i.margin)?m.margin:i.margin;break;case"wrap":i.el&&i.wrap&&oe(i.el);break;case"formatToggle":m.formatToggle=!!i.formatToggle,z("clr-format").style.display=m.formatToggle?"block":"none",m.formatToggle&&(m.format="auto");break;case"swatches":if(Array.isArray(i.swatches)){const E=z("clr-swatches"),S=e.createElement("div");E.textContent="",i.swatches.forEach((D,U)=>{const C=e.createElement("button");C.setAttribute("type","button"),C.setAttribute("id","clr-swatch-"+U),C.setAttribute("aria-labelledby","clr-swatch-label clr-swatch-"+U),C.style.color=D,C.textContent=D,S.appendChild(C)}),i.swatches.length&&E.appendChild(S),m.swatches=i.swatches.slice()}break;case"swatchesOnly":m.swatchesOnly=!!i.swatchesOnly,u.setAttribute("data-minimal",m.swatchesOnly);break;case"alpha":m.alpha=!!i.alpha,u.setAttribute("data-alpha",m.alpha);break;case"inline":if(m.inline=!!i.inline,u.setAttribute("data-inline",m.inline),m.inline){const E=i.defaultColor||m.defaultColor;L=Te(E),re(),ie(E)}break;case"clearButton":typeof i.clearButton=="object"&&(i.clearButton.label&&(m.clearLabel=i.clearButton.label,b.innerHTML=m.clearLabel),i.clearButton=i.clearButton.show),m.clearButton=!!i.clearButton,b.style.display=m.clearButton?"block":"none";break;case"clearLabel":m.clearLabel=i.clearLabel,b.innerHTML=m.clearLabel;break;case"closeButton":m.closeButton=!!i.closeButton,m.closeButton?u.insertBefore(w,h):h.appendChild(w);break;case"closeLabel":m.closeLabel=i.closeLabel,w.innerHTML=m.closeLabel;break;case"a11y":const d=i.a11y;let y=!1;if(typeof d=="object")for(const E in d)d[E]&&m.a11y[E]&&(m.a11y[E]=d[E],y=!0);if(y){const E=z("clr-open-label"),S=z("clr-swatch-label");E.innerHTML=m.a11y.open,S.innerHTML=m.a11y.swatch,w.setAttribute("aria-label",m.a11y.close),b.setAttribute("aria-label",m.a11y.clear),I.setAttribute("aria-label",m.a11y.hueSlider),F.setAttribute("aria-label",m.a11y.alphaSlider),k.setAttribute("aria-label",m.a11y.input),p.setAttribute("aria-label",m.a11y.instruction)}break;default:m[l]=i[l]}}function Ne(i,l){typeof i=="string"&&typeof l=="object"&&(te[i]=l,ne=!0)}function Ee(i){delete te[i],Object.keys(te).length===0&&(ne=!1,i===ve&&we())}function Oe(i){if(ne){const l=["el","wrap","rtl","inline","defaultColor","a11y"];for(let d in te){const y=te[d];if(i.matches(d)){ve=d,X={},l.forEach(E=>delete y[E]);for(let E in y)X[E]=Array.isArray(m[E])?m[E].slice():m[E];pe(y);break}}}}function we(){Object.keys(X).length>0&&(pe(X),ve="",X={})}function je(i){i instanceof HTMLElement&&(i=[i]),Array.isArray(i)?i.forEach(l=>{P(l,"click",$e),P(l,"input",fe)}):(P(e,"click",i,$e),P(e,"input",i,fe))}function $e(i){m.inline||(Oe(i.target),v=i.target,A=v.value,L=Te(A),u.classList.add("clr-open"),re(),ie(A),(m.focusInput||m.selectInput)&&(k.focus({preventScroll:!0}),k.setSelectionRange(v.selectionStart,v.selectionEnd)),m.selectInput&&k.select(),(R||m.swatchesOnly)&&kt().shift().focus(),v.dispatchEvent(new Event("open",{bubbles:!0})))}function re(){if(!u||!v&&!m.inline)return;const i=s,l=n.scrollY,d=u.offsetWidth,y=u.offsetHeight,E={left:!1,top:!1};let S,D,U,C={x:0,y:0};if(i&&(S=n.getComputedStyle(i),D=parseFloat(S.marginTop),U=parseFloat(S.borderTopWidth),C=i.getBoundingClientRect(),C.y+=U+l),!m.inline){const q=v.getBoundingClientRect();let Q=q.x,ae=l+q.y+q.height+m.margin;i?(Q-=C.x,ae-=C.y,Q+d>i.clientWidth&&(Q+=q.width-d,E.left=!0),ae+y>i.clientHeight-D&&y+m.margin<=q.top-(C.y-l)&&(ae-=q.height+y+m.margin*2,E.top=!0),ae+=i.scrollTop):(Q+d>e.documentElement.clientWidth&&(Q+=q.width-d,E.left=!0),ae+y-l>e.documentElement.clientHeight&&y+m.margin<=q.top&&(ae=l+q.y-y-m.margin,E.top=!0)),u.classList.toggle("clr-left",E.left),u.classList.toggle("clr-top",E.top),u.style.left=Q+"px",u.style.top=ae+"px",C.x+=u.offsetLeft,C.y+=u.offsetTop}_={width:p.offsetWidth,height:p.offsetHeight,x:p.offsetLeft+C.x,y:p.offsetTop+C.y}}function oe(i){i instanceof HTMLElement?Se(i):Array.isArray(i)?i.forEach(Se):e.querySelectorAll(i).forEach(Se)}function Se(i){const l=i.parentNode;if(!l.classList.contains("clr-field")){const d=e.createElement("div");let y="clr-field";(m.rtl||i.classList.contains("clr-rtl"))&&(y+=" clr-rtl"),d.innerHTML='<button type="button" aria-labelledby="clr-open-label"></button>',l.insertBefore(d,i),d.className=y,d.style.color=i.value,d.appendChild(i)}}function fe(i){const l=i.target.parentNode;l.classList.contains("clr-field")&&(l.style.color=i.target.value)}function Z(i){if(v&&!m.inline){const l=v;i&&(v=o,A!==l.value&&(l.value=A,l.dispatchEvent(new Event("input",{bubbles:!0})))),setTimeout(()=>{A!==l.value&&l.dispatchEvent(new Event("change",{bubbles:!0}))}),u.classList.remove("clr-open"),ne&&we(),l.dispatchEvent(new Event("close",{bubbles:!0})),m.focusInput&&l.focus({preventScroll:!0}),v=o}}function ie(i){const l=rn(i),d=nn(l);Me(d.s,d.v),N(l,d),I.value=d.h,u.style.color="hsl("+d.h+", 100%, 50%)",B.style.left=d.h/360*100+"%",f.style.left=_.width*d.s/100+"px",f.style.top=_.height-_.height*d.v/100+"px",F.value=d.a*100,O.style.left=d.a*100+"%"}function Te(i){const l=i.substring(0,3).toLowerCase();return l==="rgb"||l==="hsl"?l:"hex"}function K(i){i=i!==o?i:k.value,v&&(v.value=i,v.dispatchEvent(new Event("input",{bubbles:!0}))),m.onChange&&m.onChange.call(n,i,v),e.dispatchEvent(new CustomEvent("coloris:pick",{detail:{color:i,currentEl:v}}))}function _e(i,l){const d={h:I.value*1,s:i/_.width*100,v:100-l/_.height*100,a:F.value/100},y=me(d);Me(d.s,d.v),N(y,d),K()}function Me(i,l){let d=m.a11y.marker;i=i.toFixed(1)*1,l=l.toFixed(1)*1,d=d.replace("{s}",i),d=d.replace("{v}",l),f.setAttribute("aria-label",d)}function c(i){return{pageX:i.changedTouches?i.changedTouches[0].pageX:i.pageX,pageY:i.changedTouches?i.changedTouches[0].pageY:i.pageY}}function g(i){const l=c(i);let d=l.pageX-_.x,y=l.pageY-_.y;s&&(y+=s.scrollTop),T(d,y),i.preventDefault(),i.stopPropagation()}function j(i,l){let d=f.style.left.replace("px","")*1+i,y=f.style.top.replace("px","")*1+l;T(d,y)}function T(i,l){i=i<0?0:i>_.width?_.width:i,l=l<0?0:l>_.height?_.height:l,f.style.left=i+"px",f.style.top=l+"px",_e(i,l),f.focus()}function N(i,l){i===void 0&&(i={}),l===void 0&&(l={});let d=m.format;for(const S in i)r[S]=i[S];for(const S in l)r[S]=l[S];const y=on(r),E=y.substring(0,7);switch(f.style.color=E,O.parentNode.style.color=E,O.style.color=y,h.style.color=y,p.style.display="none",p.offsetHeight,p.style.display="",O.nextElementSibling.style.display="none",O.nextElementSibling.offsetHeight,O.nextElementSibling.style.display="",d==="mixed"?d=r.a===1?"hex":"rgb":d==="auto"&&(d=L),d){case"hex":k.value=y;break;case"rgb":k.value=an(r);break;case"hsl":k.value=sn(tn(r));break}e.querySelector('.clr-format [value="'+d+'"]').checked=!0}function M(){const i=I.value*1,l=f.style.left.replace("px","")*1,d=f.style.top.replace("px","")*1;u.style.color="hsl("+i+", 100%, 50%)",B.style.left=i/360*100+"%",_e(l,d)}function G(){const i=F.value/100;O.style.left=i*100+"%",N({a:i}),K()}function me(i){const l=i.s/100,d=i.v/100;let y=l*d,E=i.h/60,S=y*(1-t.abs(E%2-1)),D=d-y;y=y+D,S=S+D;const U=t.floor(E)%6,C=[y,S,D,D,S,y][U],q=[S,y,y,S,D,D][U],Q=[D,D,S,y,y,S][U];return{r:t.round(C*255),g:t.round(q*255),b:t.round(Q*255),a:i.a}}function tn(i){const l=i.v/100,d=l*(1-i.s/100/2);let y;return d>0&&d<1&&(y=t.round((l-d)/t.min(d,1-d)*100)),{h:i.h,s:y||0,l:t.round(d*100),a:i.a}}function nn(i){const l=i.r/255,d=i.g/255,y=i.b/255,E=t.max(l,d,y),S=t.min(l,d,y),D=E-S,U=E;let C=0,q=0;return D&&(E===l&&(C=(d-y)/D),E===d&&(C=2+(y-l)/D),E===y&&(C=4+(l-d)/D),E&&(q=D/E)),C=t.floor(C*60),{h:C<0?C+360:C,s:t.round(q*100),v:t.round(U*100),a:i.a}}function rn(i){const l=/^((rgba)|rgb)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i;let d,y;return a.fillStyle="#000",a.fillStyle=i,d=l.exec(a.fillStyle),d?y={r:d[3]*1,g:d[4]*1,b:d[5]*1,a:d[6]*1}:(d=a.fillStyle.replace("#","").match(/.{2}/g).map(E=>parseInt(E,16)),y={r:d[0],g:d[1],b:d[2],a:1}),y}function on(i){let l=i.r.toString(16),d=i.g.toString(16),y=i.b.toString(16),E="";if(i.r<16&&(l="0"+l),i.g<16&&(d="0"+d),i.b<16&&(y="0"+y),m.alpha&&(i.a<1||m.forceAlpha)){const S=i.a*255|0;E=S.toString(16),S<16&&(E="0"+E)}return"#"+l+d+y+E}function an(i){return!m.alpha||i.a===1&&!m.forceAlpha?"rgb("+i.r+", "+i.g+", "+i.b+")":"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")"}function sn(i){return!m.alpha||i.a===1&&!m.forceAlpha?"hsl("+i.h+", "+i.s+"%, "+i.l+"%)":"hsla("+i.h+", "+i.s+"%, "+i.l+"%, "+i.a+")"}function cn(){e.getElementById("clr-picker")||(s=o,u=e.createElement("div"),u.setAttribute("id","clr-picker"),u.className="clr-picker",u.innerHTML='<input id="clr-color-value" name="clr-color-value" class="clr-color" type="text" value="" spellcheck="false" aria-label="'+m.a11y.input+'">'+('<div id="clr-color-area" class="clr-gradient" role="application" aria-label="'+m.a11y.instruction+'">')+'<div id="clr-color-marker" class="clr-marker" tabindex="0"></div></div><div class="clr-hue">'+('<input id="clr-hue-slider" name="clr-hue-slider" type="range" min="0" max="360" step="1" aria-label="'+m.a11y.hueSlider+'">')+'<div id="clr-hue-marker"></div></div><div class="clr-alpha">'+('<input id="clr-alpha-slider" name="clr-alpha-slider" type="range" min="0" max="100" step="1" aria-label="'+m.a11y.alphaSlider+'">')+'<div id="clr-alpha-marker"></div><span></span></div><div id="clr-format" class="clr-format"><fieldset class="clr-segmented">'+("<legend>"+m.a11y.format+"</legend>")+'<input id="clr-f1" type="radio" name="clr-format" value="hex"><label for="clr-f1">Hex</label><input id="clr-f2" type="radio" name="clr-format" value="rgb"><label for="clr-f2">RGB</label><input id="clr-f3" type="radio" name="clr-format" value="hsl"><label for="clr-f3">HSL</label><span></span></fieldset></div><div id="clr-swatches" class="clr-swatches"></div>'+('<button type="button" id="clr-clear" class="clr-clear" aria-label="'+m.a11y.clear+'">'+m.clearLabel+"</button>")+'<div id="clr-color-preview" class="clr-preview">'+('<button type="button" id="clr-close" class="clr-close" aria-label="'+m.a11y.close+'">'+m.closeLabel+"</button>")+"</div>"+('<span id="clr-open-label" hidden>'+m.a11y.open+"</span>")+('<span id="clr-swatch-label" hidden>'+m.a11y.swatch+"</span>"),e.body.appendChild(u),p=z("clr-color-area"),f=z("clr-color-marker"),b=z("clr-clear"),w=z("clr-close"),h=z("clr-color-preview"),k=z("clr-color-value"),I=z("clr-hue-slider"),B=z("clr-hue-marker"),F=z("clr-alpha-slider"),O=z("clr-alpha-marker"),je(m.el),oe(m.el),P(u,"mousedown",i=>{u.classList.remove("clr-keyboard-nav"),i.stopPropagation()}),P(p,"mousedown",i=>{P(e,"mousemove",g)}),P(p,"contextmenu",i=>{i.preventDefault()}),P(p,"touchstart",i=>{e.addEventListener("touchmove",g,{passive:!1})}),P(f,"mousedown",i=>{P(e,"mousemove",g)}),P(f,"touchstart",i=>{e.addEventListener("touchmove",g,{passive:!1})}),P(k,"change",i=>{const l=k.value;if(v||m.inline){const d=l===""?l:ie(l);K(d)}}),P(b,"click",i=>{K(""),Z()}),P(w,"click",i=>{K(),Z()}),P(z("clr-format"),"click",".clr-format input",i=>{L=i.target.value,N(),K()}),P(u,"click",".clr-swatches button",i=>{ie(i.target.textContent),K(),m.swatchesOnly&&Z()}),P(e,"mouseup",i=>{e.removeEventListener("mousemove",g)}),P(e,"touchend",i=>{e.removeEventListener("touchmove",g)}),P(e,"mousedown",i=>{R=!1,u.classList.remove("clr-keyboard-nav"),Z()}),P(e,"keydown",i=>{const l=i.key,d=i.target,y=i.shiftKey;if(l==="Escape"?Z(!0):["Tab","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(l)&&(R=!0,u.classList.add("clr-keyboard-nav")),l==="Tab"&&d.matches(".clr-picker *")){const S=kt(),D=S.shift(),U=S.pop();y&&d===D?(U.focus(),i.preventDefault()):!y&&d===U&&(D.focus(),i.preventDefault())}}),P(e,"click",".clr-field button",i=>{ne&&we(),i.target.nextElementSibling.dispatchEvent(new Event("click",{bubbles:!0}))}),P(f,"keydown",i=>{const l={ArrowUp:[0,-1],ArrowDown:[0,1],ArrowLeft:[-1,0],ArrowRight:[1,0]};Object.keys(l).includes(i.key)&&(j(...l[i.key]),i.preventDefault())}),P(p,"click",g),P(I,"input",M),P(F,"input",G))}function kt(){return Array.from(u.querySelectorAll("input, button")).filter(d=>!!d.offsetWidth)}function z(i){return e.getElementById(i)}function P(i,l,d,y){const E=Element.prototype.matches||Element.prototype.msMatchesSelector;typeof d=="string"?i.addEventListener(l,S=>{E.call(S.target,d)&&y.call(S.target,S)}):(y=d,i.addEventListener(l,y))}function Be(i,l){l=l!==o?l:[],e.readyState!=="loading"?i(...l):e.addEventListener("DOMContentLoaded",()=>{i(...l)})}NodeList!==o&&NodeList.prototype&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);function ln(i,l){v=l,A=v.value,Oe(l),L=Te(i),re(),ie(i),K(),A!==i&&v.dispatchEvent(new Event("change",{bubbles:!0}))}const Ye=(()=>{const i={init:cn,set:pe,wrap:oe,close:Z,setInstance:Ne,setColor:ln,removeInstance:Ee,updatePosition:re,ready:Be};function l(d){Be(()=>{d&&(typeof d=="string"?je(d):pe(d))})}for(const d in i)l[d]=function(){for(var y=arguments.length,E=new Array(y),S=0;S<y;S++)E[S]=arguments[S];Be(i[d],E)};return Be(()=>{n.addEventListener("resize",d=>{l.updatePosition()}),n.addEventListener("scroll",d=>{l.updatePosition()})}),l})();return Ye.coloris=Ye,Ye})(window,document,Math)})();W.coloris;W.init;W.set;W.wrap;W.close;W.setInstance;W.removeInstance;W.updatePosition;function Fe(n){if(typeof n!="string"||!n)throw new Error("expected a non-empty string, got: "+n)}function Xe(n){if(typeof n!="number")throw new Error("expected a number, got: "+n)}const pn=1,fn=1,ue="emoji",be="keyvalue",ft="favorites",mn="tokens",$t="tokens",hn="unicode",_t="count",gn="group",yn="order",Mt="group-order",at="eTag",We="url",wt="skinTone",ke="readonly",mt="readwrite",Bt="skinUnicodes",bn="skinUnicodes",kn="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",vn="en";function En(n,e){const t=new Set,o=[];for(const a of n){const r=e(a);t.has(r)||(t.add(r),o.push(a))}return o}function jt(n){return En(n,e=>e.unicode)}function wn(n){function e(t,o,a){const r=o?n.createObjectStore(t,{keyPath:o}):n.createObjectStore(t);if(a)for(const[s,[u,p]]of Object.entries(a))r.createIndex(s,u,{multiEntry:p});return r}e(be),e(ue,hn,{[$t]:[mn,!0],[Mt]:[[gn,yn]],[Bt]:[bn,!0]}),e(ft,void 0,{[_t]:[""]})}const st={},Ue={},Ke={};function Ft(n,e,t){t.onerror=()=>e(t.error),t.onblocked=()=>e(new Error("IDB blocked")),t.onsuccess=()=>n(t.result)}async function jn(n){const e=await new Promise((t,o)=>{const a=indexedDB.open(n,pn);st[n]=a,a.onupgradeneeded=r=>{r.oldVersion<fn&&wn(a.result)},Ft(t,o,a)});return e.onclose=()=>ht(n),e}function Sn(n){return Ue[n]||(Ue[n]=jn(n)),Ue[n]}function Y(n,e,t,o){return new Promise((a,r)=>{const s=n.transaction(e,t,{durability:"relaxed"}),u=typeof e=="string"?s.objectStore(e):e.map(f=>s.objectStore(f));let p;o(u,s,f=>{p=f}),s.oncomplete=()=>a(p),s.onerror=()=>r(s.error)})}function ht(n){const e=st[n],t=e&&e.result;if(t){t.close();const o=Ke[n];if(o)for(const a of o)a()}delete st[n],delete Ue[n],delete Ke[n]}function Tn(n){return new Promise((e,t)=>{ht(n);const o=indexedDB.deleteDatabase(n);Ft(e,t,o)})}function Ln(n,e){let t=Ke[n];t||(t=Ke[n]=[]),t.push(e)}const Cn=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]);function ge(n){return n.split(/[\s_]+/).map(e=>!e.match(/\w/)||Cn.has(e)?e.toLowerCase():e.replace(/[)(:,]/g,"").replace(/’/g,"'").toLowerCase()).filter(Boolean)}const Pn=2;function Rt(n){return n.filter(Boolean).map(e=>e.toLowerCase()).filter(e=>e.length>=Pn)}function xn(n){return n.map(({annotation:t,emoticon:o,group:a,order:r,shortcodes:s,skins:u,tags:p,emoji:f,version:h})=>{const k=[...new Set(Rt([...(s||[]).map(ge).flat(),...(p||[]).map(ge).flat(),...ge(t),o]))].sort(),b={annotation:t,group:a,order:r,tags:p,tokens:k,unicode:f,version:h};if(o&&(b.emoticon=o),s&&(b.shortcodes=s),u){b.skinTones=[],b.skinUnicodes=[],b.skinVersions=[];for(const{tone:w,emoji:I,version:B}of u)b.skinTones.push(w),b.skinUnicodes.push(I),b.skinVersions.push(B)}return b})}function Ht(n,e,t,o){n[e](t).onsuccess=a=>o&&o(a.target.result)}function de(n,e,t){Ht(n,"get",e,t)}function zt(n,e,t){Ht(n,"getAll",e,t)}function gt(n){n.commit&&n.commit()}function In(n,e){let t=n[0];for(let o=1;o<n.length;o++){const a=n[o];e(t)>e(a)&&(t=a)}return t}function Ut(n,e){const t=In(n,a=>a.length),o=[];for(const a of t)n.some(r=>r.findIndex(s=>e(s)===e(a))===-1)||o.push(a);return o}async function An(n){return!await yt(n,be,We)}async function Dn(n,e,t){const[o,a]=await Promise.all([at,We].map(r=>yt(n,be,r)));return o===t&&a===e}async function Nn(n,e){return Y(n,ue,ke,(o,a,r)=>{let s;const u=()=>{o.getAll(s&&IDBKeyRange.lowerBound(s,!0),50).onsuccess=p=>{const f=p.target.result;for(const h of f)if(s=h.unicode,e(h))return r(h);if(f.length<50)return r();u()}};u()})}async function qt(n,e,t,o){try{const a=xn(e);await Y(n,[ue,be],mt,([r,s],u)=>{let p,f,h=0;function k(){++h===2&&b()}function b(){if(!(p===o&&f===t)){r.clear();for(const w of a)r.put(w);s.put(o,at),s.put(t,We),gt(u)}}de(s,at,w=>{p=w,k()}),de(s,We,w=>{f=w,k()})})}finally{}}async function On(n,e){return Y(n,ue,ke,(t,o,a)=>{const r=IDBKeyRange.bound([e,0],[e+1,0],!1,!0);zt(t.index(Mt),r,a)})}async function Gt(n,e){const t=Rt(ge(e));return t.length?Y(n,ue,ke,(o,a,r)=>{const s=[],u=()=>{s.length===t.length&&p()},p=()=>{const f=Ut(s,h=>h.unicode);r(f.sort((h,k)=>h.order<k.order?-1:1))};for(let f=0;f<t.length;f++){const h=t[f],k=f===t.length-1?IDBKeyRange.bound(h,h+"￿",!1,!0):IDBKeyRange.only(h);zt(o.index($t),k,b=>{s.push(b),u()})}}):[]}async function $n(n,e){const t=await Gt(n,e);return t.length?t.filter(o=>(o.shortcodes||[]).map(r=>r.toLowerCase()).includes(e.toLowerCase()))[0]||null:await Nn(n,a=>(a.shortcodes||[]).includes(e.toLowerCase()))||null}async function _n(n,e){return Y(n,ue,ke,(t,o,a)=>de(t,e,r=>{if(r)return a(r);de(t.index(Bt),e,s=>a(s||null))}))}function yt(n,e,t){return Y(n,e,ke,(o,a,r)=>de(o,t,r))}function Mn(n,e,t,o){return Y(n,e,mt,(a,r)=>{a.put(o,t),gt(r)})}function Bn(n,e){return Y(n,ft,mt,(t,o)=>de(t,e,a=>{t.put((a||0)+1,e),gt(o)}))}function Fn(n,e,t){return t===0?[]:Y(n,[ft,ue],ke,([o,a],r,s)=>{const u=[];o.index(_t).openCursor(void 0,"prev").onsuccess=p=>{const f=p.target.result;if(!f)return s(u);function h(w){if(u.push(w),u.length===t)return s(u);f.continue()}const k=f.primaryKey,b=e.byName(k);if(b)return h(b);de(a,k,w=>{if(w)return h(w);f.continue()})}})}const Re="";function Rn(n,e){const t=new Map;for(const a of n){const r=e(a);for(const s of r){let u=t;for(let f=0;f<s.length;f++){const h=s.charAt(f);let k=u.get(h);k||(k=new Map,u.set(h,k)),u=k}let p=u.get(Re);p||(p=[],u.set(Re,p)),p.push(a)}}return(a,r)=>{let s=t;for(let f=0;f<a.length;f++){const h=a.charAt(f),k=s.get(h);if(k)s=k;else return[]}if(r)return s.get(Re)||[];const u=[],p=[s];for(;p.length;){const h=[...p.shift().entries()].sort((k,b)=>k[0]<b[0]?-1:1);for(const[k,b]of h)k===Re?u.push(...b):p.push(b)}return u}}const Hn=["name","url"];function zn(n){const e=n&&Array.isArray(n),t=e&&n.length&&(!n[0]||Hn.some(o=>!(o in n[0])));if(!e||t)throw new Error("Custom emojis are in the wrong format")}function St(n){zn(n);const e=(b,w)=>b.name.toLowerCase()<w.name.toLowerCase()?-1:1,t=n.sort(e),a=Rn(n,b=>{const w=new Set;if(b.shortcodes)for(const I of b.shortcodes)for(const B of ge(I))w.add(B);return w}),r=b=>a(b,!0),s=b=>a(b,!1),u=b=>{const w=ge(b),I=w.map((B,F)=>(F<w.length-1?r:s)(B));return Ut(I,B=>B.name).sort(e)},p=new Map,f=new Map;for(const b of n){f.set(b.name.toLowerCase(),b);for(const w of b.shortcodes||[])p.set(w.toLowerCase(),b)}return{all:t,search:u,byShortcode:b=>p.get(b.toLowerCase()),byName:b=>f.get(b.toLowerCase())}}const Un=typeof wrappedJSObject<"u";function Pe(n){if(!n)return n;if(Un&&(n=structuredClone(n)),delete n.tokens,n.skinTones){const e=n.skinTones.length;n.skins=Array(e);for(let t=0;t<e;t++)n.skins[t]={tone:n.skinTones[t],unicode:n.skinUnicodes[t],version:n.skinVersions[t]};delete n.skinTones,delete n.skinUnicodes,delete n.skinVersions}return n}function Wt(n){n||console.warn("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}const qn=["annotation","emoji","group","order","version"];function Gn(n){if(!n||!Array.isArray(n)||!n[0]||typeof n[0]!="object"||qn.some(e=>!(e in n[0])))throw new Error("Emoji data is in the wrong format")}function Kt(n,e){if(Math.floor(n.status/100)!==2)throw new Error("Failed to fetch: "+e+":  "+n.status)}async function Wn(n){const e=await fetch(n,{method:"HEAD"});Kt(e,n);const t=e.headers.get("etag");return Wt(t),t}async function ct(n){const e=await fetch(n);Kt(e,n);const t=e.headers.get("etag");Wt(t);const o=await e.json();return Gn(o),[t,o]}function Kn(n){for(var e="",t=new Uint8Array(n),o=t.byteLength,a=-1;++a<o;)e+=String.fromCharCode(t[a]);return e}function Vn(n){for(var e=n.length,t=new ArrayBuffer(e),o=new Uint8Array(t),a=-1;++a<e;)o[a]=n.charCodeAt(a);return t}async function Vt(n){const e=JSON.stringify(n);let t=Vn(e);const o=await crypto.subtle.digest("SHA-1",t),a=Kn(o);return btoa(a)}async function Jn(n,e){let t,o=await Wn(e);if(!o){const a=await ct(e);o=a[0],t=a[1],o||(o=await Vt(t))}await Dn(n,e,o)||(t||(t=(await ct(e))[1]),await qt(n,t,e,o))}async function Yn(n,e){let[t,o]=await ct(e);t||(t=await Vt(o)),await qt(n,o,e,t)}class Xn{constructor({dataSource:e=kn,locale:t=vn,customEmoji:o=[]}={}){this.dataSource=e,this.locale=t,this._dbName=`emoji-picker-element-${this.locale}`,this._db=void 0,this._lazyUpdate=void 0,this._custom=St(o),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const e=this._db=await Sn(this._dbName);Ln(this._dbName,this._clear);const t=this.dataSource;await An(e)?await Yn(e,t):this._lazyUpdate=Jn(e,t)}async ready(){const e=async()=>(this._ready||(this._ready=this._init()),this._ready);await e(),this._db||await e()}async getEmojiByGroup(e){return Xe(e),await this.ready(),jt(await On(this._db,e)).map(Pe)}async getEmojiBySearchQuery(e){Fe(e),await this.ready();const t=this._custom.search(e),o=jt(await Gt(this._db,e)).map(Pe);return[...t,...o]}async getEmojiByShortcode(e){Fe(e),await this.ready();const t=this._custom.byShortcode(e);return t||Pe(await $n(this._db,e))}async getEmojiByUnicodeOrName(e){Fe(e),await this.ready();const t=this._custom.byName(e);return t||Pe(await _n(this._db,e))}async getPreferredSkinTone(){return await this.ready(),await yt(this._db,be,wt)||0}async setPreferredSkinTone(e){return Xe(e),await this.ready(),Mn(this._db,be,wt,e)}async incrementFavoriteEmojiCount(e){return Fe(e),await this.ready(),Bn(this._db,e)}async getTopFavoriteEmoji(e){return Xe(e),await this.ready(),(await Fn(this._db,this._custom,e)).map(Pe)}set customEmoji(e){this._custom=St(e)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{await this._lazyUpdate}catch{}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await ht(this._dbName)}async delete(){await this._shutdown(),await Tn(this._dbName)}}const lt=[[-1,"✨","custom"],[0,"😀","smileys-emotion"],[1,"👋","people-body"],[3,"🐱","animals-nature"],[4,"🍎","food-drink"],[5,"🏠️","travel-places"],[6,"⚽","activities"],[7,"📝","objects"],[8,"⛔️","symbols"],[9,"🏁","flags"]].map(([n,e,t])=>({id:n,emoji:e,name:t})),Ze=lt.slice(1),Zn=2,Tt=6,Jt=typeof requestIdleCallback=="function"?requestIdleCallback:setTimeout;function Lt(n){return n.unicode.includes("‍")}const Qn={"🫩":16,"🫨":15.1,"🫠":14,"🥲":13.1,"🥻":12.1,"🥰":11,"🤩":5,"👱‍♀️":4,"🤣":3,"👁️‍🗨️":2,"😀":1,"😐️":.7,"😃":.6},er=1e3,tr="🖐️",nr=8,rr=["😊","😒","❤️","👍️","😍","😂","😭","☺️","😔","😩","😏","💕","🙌","😘"],Yt='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',or=(n,e)=>n<e?-1:n>e?1:0,Ct=(n,e)=>{const t=document.createElement("canvas");t.width=t.height=1;const o=t.getContext("2d",{willReadFrequently:!0});return o.textBaseline="top",o.font=`100px ${Yt}`,o.fillStyle=e,o.scale(.01,.01),o.fillText(n,0,0),o.getImageData(0,0,1,1).data},ir=(n,e)=>{const t=[...n].join(","),o=[...e].join(",");return t===o&&!t.startsWith("0,0,0,")};function ar(n){const e=Ct(n,"#000"),t=Ct(n,"#fff");return e&&t&&ir(e,t)}function sr(){const n=Object.entries(Qn);try{for(const[e,t]of n)if(ar(e))return t}catch{}finally{}return n[0][1]}let Qe;const et=()=>(Qe||(Qe=new Promise(n=>Jt(()=>n(sr())))),Qe),dt=new Map,cr="️",lr="\uD83C",dr="‍",ur=127995,pr=57339;function fr(n,e){if(e===0)return n;const t=n.indexOf(dr);return t!==-1?n.substring(0,t)+String.fromCodePoint(ur+e-1)+n.substring(t):(n.endsWith(cr)&&(n=n.substring(0,n.length-1)),n+lr+String.fromCodePoint(pr+e-1))}function V(n){n.preventDefault(),n.stopPropagation()}function tt(n,e,t){return e+=n?-1:1,e<0?e=t.length-1:e>=t.length&&(e=0),e}function Xt(n,e){const t=new Set,o=[];for(const a of n){const r=e(a);t.has(r)||(t.add(r),o.push(a))}return o}function mr(n,e){const t=o=>{const a={};for(const r of o)typeof r.tone=="number"&&r.version<=e&&(a[r.tone]=r.unicode);return a};return n.map(({unicode:o,skins:a,shortcodes:r,url:s,name:u,category:p,annotation:f})=>({unicode:o,name:u,shortcodes:r,url:s,category:p,annotation:f,id:o||u,skins:a&&t(a)}))}const qe=requestAnimationFrame;let hr=typeof ResizeObserver=="function";function gr(n,e,t){let o;hr?(o=new ResizeObserver(t),o.observe(n)):qe(t),e.addEventListener("abort",()=>{o&&o.disconnect()})}function Pt(n){{const e=document.createRange();return e.selectNode(n.firstChild),e.getBoundingClientRect().width}}let nt;function yr(n,e,t){let o=!0;for(const a of n){const r=t(a),s=Pt(r);typeof nt>"u"&&(nt=Pt(e));const u=s/1.8<nt;dt.set(a.unicode,u),u||(o=!1)}return o}function br(n){return Xt(n,e=>e)}function kr(n){n&&(n.scrollTop=0)}function xe(n,e,t){let o=n.get(e);return o||(o=t(),n.set(e,o)),o}function xt(n){return""+n}function vr(n){const e=document.createElement("template");return e.innerHTML=n,e}const Er=new WeakMap,wr=new WeakMap,jr=Symbol("un-keyed"),Sr="replaceChildren"in Element.prototype;function Tr(n,e){Sr?n.replaceChildren(...e):(n.innerHTML="",n.append(...e))}function Lr(n,e){let t=n.firstChild,o=0;for(;t;){if(e[o]!==t)return!0;t=t.nextSibling,o++}return o!==e.length}function Cr(n,e){const{targetNode:t}=e;let{targetParentNode:o}=e,a=!1;o?a=Lr(o,n):(a=!0,e.targetNode=void 0,e.targetParentNode=o=t.parentNode),a&&Tr(o,n)}function Pr(n,e){for(const t of e){const{targetNode:o,currentExpression:a,binding:{expressionIndex:r,attributeName:s,attributeValuePre:u,attributeValuePost:p}}=t,f=n[r];if(a!==f)if(t.currentExpression=f,s)o.setAttribute(s,u+xt(f)+p);else{let h;Array.isArray(f)?Cr(f,t):f instanceof Element?(h=f,o.replaceWith(h)):o.nodeValue=xt(f),h&&(t.targetNode=h)}}}function xr(n){let e="",t=!1,o=!1,a=-1;const r=new Map,s=[];for(let p=0,f=n.length;p<f;p++){const h=n[p];if(e+=h,p===f-1)break;for(let O=0;O<h.length;O++)switch(h.charAt(O)){case"<":{h.charAt(O+1)==="/"?s.pop():(t=!0,s.push(++a));break}case">":{t=!1,o=!1;break}case"=":{o=!0;break}}const k=s[s.length-1],b=xe(r,k,()=>[]);let w,I,B;if(o){const O=/(\S+)="?([^"=]*)$/.exec(h);w=O[1],I=O[2],B=/^[^">]*/.exec(n[p+1])[0]}const F={attributeName:w,attributeValuePre:I,attributeValuePost:B,expressionIndex:p};b.push(F),!t&&!o&&(e+=" ")}return{template:vr(e),elementsToBindings:r}}function It(n,e,t){for(let o=0;o<n.length;o++){const a=n[o],r=a.attributeName?e:e.firstChild,s={binding:a,targetNode:r,targetParentNode:void 0,currentExpression:void 0};t.push(s)}}function Ir(n,e){const t=[];let o;if(e.size===1&&(o=e.get(0)))It(o,n,t);else{const a=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT);let r=n,s=-1;do{const u=e.get(++s);u&&It(u,r,t)}while(r=a.nextNode())}return t}function Ar(n){const{template:e,elementsToBindings:t}=xe(Er,n,()=>xr(n)),o=e.cloneNode(!0).content.firstElementChild,a=Ir(o,t);return function(s){return Pr(s,a),o}}function Dr(n){const e=xe(wr,n,()=>new Map);let t=jr;function o(r,...s){const u=xe(e,r,()=>new Map);return xe(u,t,()=>Ar(r))(s)}function a(r,s,u){return r.map((p,f)=>{const h=t;t=u(p);try{return s(p,f)}finally{t=h}})}return{map:a,html:o}}function Nr(n,e,t,o,a,r,s,u,p){const{labelWithSkin:f,titleForEmoji:h,unicodeWithSkin:k}=t,{html:b,map:w}=Dr(e);function I(v,L,A){return w(v,(R,_)=>b`<button role="${L?"option":"menuitem"}" aria-selected="${L?_===e.activeSearchItem:""}" aria-label="${f(R,e.currentSkinTone)}" title="${h(R)}" class="${"emoji"+(L&&_===e.activeSearchItem?" active":"")+(R.unicode?"":" custom-emoji")}" id="${`${A}-${R.id}`}" style="${R.unicode?"":`--custom-emoji-background: url(${JSON.stringify(R.url)})`}">${R.unicode?k(R,e.currentSkinTone):""}</button>`,R=>`${A}-${R.id}`)}const F=b`<section data-ref="rootElement" class="picker" aria-label="${e.i18n.regionLabel}" style="${e.pickerStyle||""}"><div class="pad-top"></div><div class="search-row"><div class="search-wrapper"><input id="search" class="search" type="search" role="combobox" enterkeyhint="search" placeholder="${e.i18n.searchLabel}" autocapitalize="none" autocomplete="off" spellcheck="true" aria-expanded="${!!(e.searchMode&&e.currentEmojis.length)}" aria-controls="search-results" aria-describedby="search-description" aria-autocomplete="list" aria-activedescendant="${e.activeSearchItemId?`emo-${e.activeSearchItemId}`:""}" data-ref="searchElement" data-on-input="onSearchInput" data-on-keydown="onSearchKeydown"><label class="sr-only" for="search">${e.i18n.searchLabel}</label> <span id="search-description" class="sr-only">${e.i18n.searchDescription}</span></div><div class="skintone-button-wrapper ${e.skinTonePickerExpandedAfterAnimation?"expanded":""}"><button id="skintone-button" class="emoji ${e.skinTonePickerExpanded?"hide-focus":""}" aria-label="${e.skinToneButtonLabel}" title="${e.skinToneButtonLabel}" aria-describedby="skintone-description" aria-haspopup="listbox" aria-expanded="${e.skinTonePickerExpanded}" aria-controls="skintone-list" data-on-click="onClickSkinToneButton">${e.skinToneButtonText||""}</button></div><span id="skintone-description" class="sr-only">${e.i18n.skinToneDescription}</span><div data-ref="skinToneDropdown" id="skintone-list" class="skintone-list hide-focus ${e.skinTonePickerExpanded?"":"hidden no-animate"}" style="transform:translateY(${e.skinTonePickerExpanded?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))"})" role="listbox" aria-label="${e.i18n.skinTonesLabel}" aria-activedescendant="skintone-${e.activeSkinTone}" aria-hidden="${!e.skinTonePickerExpanded}" tabIndex="-1" data-on-focusout="onSkinToneOptionsFocusOut" data-on-click="onSkinToneOptionsClick" data-on-keydown="onSkinToneOptionsKeydown" data-on-keyup="onSkinToneOptionsKeyup">${w(e.skinTones,(v,L)=>b`<div id="skintone-${L}" class="emoji ${L===e.activeSkinTone?"active":""}" aria-selected="${L===e.activeSkinTone}" role="option" title="${e.i18n.skinTones[L]}" aria-label="${e.i18n.skinTones[L]}">${v}</div>`,v=>v)}</div></div><div class="nav" role="tablist" style="grid-template-columns:repeat(${e.groups.length},1fr)" aria-label="${e.i18n.categoriesLabel}" data-on-keydown="onNavKeydown" data-on-click="onNavClick">${w(e.groups,v=>b`<button role="tab" class="nav-button" aria-controls="tab-${v.id}" aria-label="${e.i18n.categories[v.name]}" aria-selected="${!e.searchMode&&e.currentGroup.id===v.id}" title="${e.i18n.categories[v.name]}" data-group-id="${v.id}"><div class="nav-emoji emoji">${v.emoji}</div></button>`,v=>v.id)}</div><div class="indicator-wrapper"><div class="indicator" style="transform:translateX(${(e.isRtl?-1:1)*e.currentGroupIndex*100}%)"></div></div><div class="message ${e.message?"":"gone"}" role="alert" aria-live="polite">${e.message||""}</div><div data-ref="tabpanelElement" class="tabpanel ${!e.databaseLoaded||e.message?"gone":""}" role="${e.searchMode?"region":"tabpanel"}" aria-label="${e.searchMode?e.i18n.searchResultsLabel:e.i18n.categories[e.currentGroup.name]}" id="${e.searchMode?"":`tab-${e.currentGroup.id}`}" tabIndex="0" data-on-click="onEmojiClick"><div data-action="calculateEmojiGridStyle">${w(e.currentEmojisWithCategories,(v,L)=>b`<div><div id="menu-label-${L}" class="category ${e.currentEmojisWithCategories.length===1&&e.currentEmojisWithCategories[0].category===""?"gone":""}" aria-hidden="true">${e.searchMode?e.i18n.searchResultsLabel:v.category?v.category:e.currentEmojisWithCategories.length>1?e.i18n.categories.custom:e.i18n.categories[e.currentGroup.name]}</div><div class="emoji-menu ${L!==0&&!e.searchMode&&e.currentGroup.id===-1?"visibility-auto":""}" style="${`--num-rows: ${Math.ceil(v.emojis.length/e.numColumns)}`}" data-action="updateOnIntersection" role="${e.searchMode?"listbox":"menu"}" aria-labelledby="menu-label-${L}" id="${e.searchMode?"search-results":""}">${I(v.emojis,e.searchMode,"emo")}</div></div>`,v=>v.category)}</div></div><div class="favorites onscreen emoji-menu ${e.message?"gone":""}" role="menu" aria-label="${e.i18n.favoritesLabel}" data-on-click="onEmojiClick">${I(e.currentFavorites,!1,"fav")}</div><button data-ref="baselineEmoji" aria-hidden="true" tabindex="-1" class="abs-pos hidden emoji baseline-emoji">😀</button></section>`,O=(v,L)=>{for(const A of n.querySelectorAll(`[${v}]`))L(A,A.getAttribute(v))};if(p){n.appendChild(F);for(const v of["click","focusout","input","keydown","keyup"])O(`data-on-${v}`,(L,A)=>{L.addEventListener(v,o[A])});O("data-ref",(v,L)=>{r[L]=v}),s.addEventListener("abort",()=>{n.removeChild(F)})}O("data-action",(v,L)=>{let A=u.get(L);A||u.set(L,A=new WeakSet),A.has(v)||(A.add(v),a[L](v))})}const Ve=typeof queueMicrotask=="function"?queueMicrotask:n=>Promise.resolve().then(n);function Or(n){let e=!1,t;const o=new Map,a=new Set;let r;const s=()=>{if(e)return;const f=[...a];a.clear();try{for(const h of f)h()}finally{r=!1,a.size&&(r=!0,Ve(s))}},u=new Proxy({},{get(f,h){if(t){let k=o.get(h);k||(k=new Set,o.set(h,k)),k.add(t)}return f[h]},set(f,h,k){if(f[h]!==k){f[h]=k;const b=o.get(h);if(b){for(const w of b)a.add(w);r||(r=!0,Ve(s))}}return!0}}),p=f=>{const h=()=>{const k=t;t=h;try{return f()}finally{t=k}};return h()};return n.addEventListener("abort",()=>{e=!0}),{state:u,createEffect:p}}function rt(n,e,t){if(n.length!==e.length)return!1;for(let o=0;o<n.length;o++)if(!t(n[o],e[o]))return!1;return!0}const At=new WeakMap;function $r(n,e,t){{const o=n.closest(".tabpanel");let a=At.get(o);a||(a=new IntersectionObserver(t,{root:o,rootMargin:"50% 0px 50% 0px",threshold:0}),At.set(o,a),e.addEventListener("abort",()=>{a.disconnect()})),a.observe(n)}}const ot=[],{assign:He}=Object;function _r(n,e){const t={},o=new AbortController,a=o.signal,{state:r,createEffect:s}=Or(a),u=new Map;He(r,{skinToneEmoji:void 0,i18n:void 0,database:void 0,customEmoji:void 0,customCategorySorting:void 0,emojiVersion:void 0}),He(r,e),He(r,{initialLoad:!0,currentEmojis:[],currentEmojisWithCategories:[],rawSearchText:"",searchText:"",searchMode:!1,activeSearchItem:-1,message:void 0,skinTonePickerExpanded:!1,skinTonePickerExpandedAfterAnimation:!1,currentSkinTone:0,activeSkinTone:0,skinToneButtonText:void 0,pickerStyle:void 0,skinToneButtonLabel:"",skinTones:[],currentFavorites:[],defaultFavoriteEmojis:void 0,numColumns:nr,isRtl:!1,currentGroupIndex:0,groups:Ze,databaseLoaded:!1,activeSearchItemId:void 0}),s(()=>{r.currentGroup!==r.groups[r.currentGroupIndex]&&(r.currentGroup=r.groups[r.currentGroupIndex])});const p=c=>{n.getElementById(c).focus()},f=c=>n.getElementById(`emo-${c.id}`),h=(c,g)=>{t.rootElement.dispatchEvent(new CustomEvent(c,{detail:g,bubbles:!0,composed:!0}))},k=(c,g)=>c.id===g.id,b=(c,g)=>{const{category:j,emojis:T}=c,{category:N,emojis:M}=g;return j!==N?!1:rt(T,M,k)},w=c=>{rt(r.currentEmojis,c,k)||(r.currentEmojis=c)},I=c=>{r.searchMode!==c&&(r.searchMode=c)},B=c=>{rt(r.currentEmojisWithCategories,c,b)||(r.currentEmojisWithCategories=c)},F=(c,g)=>g&&c.skins&&c.skins[g]||c.unicode,L={labelWithSkin:(c,g)=>br([c.name||F(c,g),c.annotation,...c.shortcodes||ot].filter(Boolean)).join(", "),titleForEmoji:c=>c.annotation||(c.shortcodes||ot).join(", "),unicodeWithSkin:F},A={onClickSkinToneButton:ie,onEmojiClick:Se,onNavClick:$e,onNavKeydown:re,onSearchKeydown:je,onSkinToneOptionsClick:Z,onSkinToneOptionsFocusOut:_e,onSkinToneOptionsKeydown:Te,onSkinToneOptionsKeyup:K,onSearchInput:Me},R={calculateEmojiGridStyle:te,updateOnIntersection:ve};let _=!0;s(()=>{Nr(n,r,L,A,R,t,a,u,_),_=!1}),r.emojiVersion||et().then(c=>{c||(r.message=r.i18n.emojiUnsupportedMessage)}),s(()=>{async function c(){let g=!1;const j=setTimeout(()=>{g=!0,r.message=r.i18n.loadingMessage},er);try{await r.database.ready(),r.databaseLoaded=!0}catch(T){console.error(T),r.message=r.i18n.networkErrorMessage}finally{clearTimeout(j),g&&(g=!1,r.message="")}}r.database&&c()}),s(()=>{r.pickerStyle=`
      --num-groups: ${r.groups.length}; 
      --indicator-opacity: ${r.searchMode?0:1}; 
      --num-skintones: ${Tt};`}),s(()=>{r.customEmoji&&r.database&&m()}),s(()=>{r.customEmoji&&r.customEmoji.length?r.groups!==lt&&(r.groups=lt):r.groups!==Ze&&(r.currentGroupIndex&&r.currentGroupIndex--,r.groups=Ze)}),s(()=>{async function c(){r.databaseLoaded&&(r.currentSkinTone=await r.database.getPreferredSkinTone())}c()}),s(()=>{r.skinTones=Array(Tt).fill().map((c,g)=>fr(r.skinToneEmoji,g))}),s(()=>{r.skinToneButtonText=r.skinTones[r.currentSkinTone]}),s(()=>{r.skinToneButtonLabel=r.i18n.skinToneLabel.replace("{skinTone}",r.i18n.skinTones[r.currentSkinTone])}),s(()=>{async function c(){const{database:g}=r,j=(await Promise.all(rr.map(T=>g.getEmojiByUnicodeOrName(T)))).filter(Boolean);r.defaultFavoriteEmojis=j}r.databaseLoaded&&c()});function m(){const{customEmoji:c,database:g}=r,j=c||ot;g.customEmoji!==j&&(g.customEmoji=j)}s(()=>{async function c(){m();const{database:g,defaultFavoriteEmojis:j,numColumns:T}=r,N=await g.getTopFavoriteEmoji(T),M=await Ee(Xt([...N,...j],G=>G.unicode||G.name).slice(0,T));r.currentFavorites=M}r.databaseLoaded&&r.defaultFavoriteEmojis&&c()});function te(c){gr(c,a,()=>{{const g=getComputedStyle(t.rootElement),j=parseInt(g.getPropertyValue("--num-columns"),10),T=g.getPropertyValue("direction")==="rtl";r.numColumns=j,r.isRtl=T}})}function ve(c){$r(c,a,g=>{for(const{target:j,isIntersecting:T}of g)j.classList.toggle("onscreen",T)})}s(()=>{async function c(){const{searchText:g,currentGroup:j,databaseLoaded:T,customEmoji:N}=r;if(!T)r.currentEmojis=[],r.searchMode=!1;else if(g.length>=Zn){const M=await we(g);r.searchText===g&&(w(M),I(!0))}else{const{id:M}=j;if(M!==-1||N&&N.length){const G=await Oe(M);r.currentGroup.id===M&&(w(G),I(!1))}}}c()});const X=()=>{qe(()=>kr(t.tabpanelElement))};s(()=>{const{currentEmojis:c,emojiVersion:g}=r,j=c.filter(T=>T.unicode).filter(T=>Lt(T)&&!dt.has(T.unicode));if(!g&&j.length)w(c),qe(()=>ne(j));else{const T=g?c:c.filter(pe);w(T),X()}});function ne(c){yr(c,t.baselineEmoji,f)?X():r.currentEmojis=[...r.currentEmojis]}function pe(c){return!c.unicode||!Lt(c)||dt.get(c.unicode)}async function Ne(c){const g=r.emojiVersion||await et();return c.filter(({version:j})=>!j||j<=g)}async function Ee(c){return mr(c,r.emojiVersion||await et())}async function Oe(c){const g=c===-1?r.customEmoji:await r.database.getEmojiByGroup(c);return Ee(await Ne(g))}async function we(c){return Ee(await Ne(await r.database.getEmojiBySearchQuery(c)))}s(()=>{}),s(()=>{function c(){const{searchMode:j,currentEmojis:T}=r;if(j)return[{category:"",emojis:T}];const N=new Map;for(const M of T){const G=M.category||"";let me=N.get(G);me||(me=[],N.set(G,me)),me.push(M)}return[...N.entries()].map(([M,G])=>({category:M,emojis:G})).sort((M,G)=>r.customCategorySorting(M.category,G.category))}const g=c();B(g)}),s(()=>{r.activeSearchItemId=r.activeSearchItem!==-1&&r.currentEmojis[r.activeSearchItem].id}),s(()=>{const{rawSearchText:c}=r;Jt(()=>{r.searchText=(c||"").trim(),r.activeSearchItem=-1})});function je(c){if(!r.searchMode||!r.currentEmojis.length)return;const g=j=>{V(c),r.activeSearchItem=tt(j,r.activeSearchItem,r.currentEmojis)};switch(c.key){case"ArrowDown":return g(!1);case"ArrowUp":return g(!0);case"Enter":if(r.activeSearchItem===-1)r.activeSearchItem=0;else return V(c),oe(r.currentEmojis[r.activeSearchItem].id)}}function $e(c){const{target:g}=c,j=g.closest(".nav-button");if(!j)return;const T=parseInt(j.dataset.groupId,10);t.searchElement.value="",r.rawSearchText="",r.searchText="",r.activeSearchItem=-1,r.currentGroupIndex=r.groups.findIndex(N=>N.id===T)}function re(c){const{target:g,key:j}=c,T=N=>{N&&(V(c),N.focus())};switch(j){case"ArrowLeft":return T(g.previousElementSibling);case"ArrowRight":return T(g.nextElementSibling);case"Home":return T(g.parentElement.firstElementChild);case"End":return T(g.parentElement.lastElementChild)}}async function oe(c){const g=await r.database.getEmojiByUnicodeOrName(c),j=[...r.currentEmojis,...r.currentFavorites].find(N=>N.id===c),T=j.unicode&&F(j,r.currentSkinTone);await r.database.incrementFavoriteEmojiCount(c),h("emoji-click",{emoji:g,skinTone:r.currentSkinTone,...T&&{unicode:T},...j.name&&{name:j.name}})}async function Se(c){const{target:g}=c;if(!g.classList.contains("emoji"))return;V(c);const j=g.id.substring(4);oe(j)}function fe(c){r.currentSkinTone=c,r.skinTonePickerExpanded=!1,p("skintone-button"),h("skin-tone-change",{skinTone:c}),r.database.setPreferredSkinTone(c)}function Z(c){const{target:{id:g}}=c,j=g&&g.match(/^skintone-(\d)/);if(!j)return;V(c);const T=parseInt(j[1],10);fe(T)}function ie(c){r.skinTonePickerExpanded=!r.skinTonePickerExpanded,r.activeSkinTone=r.currentSkinTone,r.skinTonePickerExpanded&&(V(c),qe(()=>p("skintone-list")))}s(()=>{r.skinTonePickerExpanded?t.skinToneDropdown.addEventListener("transitionend",()=>{r.skinTonePickerExpandedAfterAnimation=!0},{once:!0}):r.skinTonePickerExpandedAfterAnimation=!1});function Te(c){if(!r.skinTonePickerExpanded)return;const g=async j=>{V(c),r.activeSkinTone=j};switch(c.key){case"ArrowUp":return g(tt(!0,r.activeSkinTone,r.skinTones));case"ArrowDown":return g(tt(!1,r.activeSkinTone,r.skinTones));case"Home":return g(0);case"End":return g(r.skinTones.length-1);case"Enter":return V(c),fe(r.activeSkinTone);case"Escape":return V(c),r.skinTonePickerExpanded=!1,p("skintone-button")}}function K(c){if(r.skinTonePickerExpanded)switch(c.key){case" ":return V(c),fe(r.activeSkinTone)}}async function _e(c){const{relatedTarget:g}=c;(!g||g.id!=="skintone-list")&&(r.skinTonePickerExpanded=!1)}function Me(c){r.rawSearchText=c.target.value}return{$set(c){He(r,c)},$destroy(){o.abort()}}}const Mr="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",Br="en";var Fr={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading…",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}},Rr=':host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--border-radius:0;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){color-scheme:light;--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);border-radius:var(--border-radius);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;scrollbar-gutter:stable;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.emoji-menu.visibility-auto{content-visibility:auto;contain-intrinsic-size:calc(var(--num-columns)*var(--total-emoji-size)) calc(var(--num-rows)*var(--total-emoji-size))}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;height:var(--total-emoji-size);width:var(--total-emoji-size);line-height:1;overflow:hidden;font-family:var(--emoji-font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.onscreen .custom-emoji::after{content:"";width:var(--emoji-size);height:var(--emoji-size);background-repeat:no-repeat;background-position:center center;background-size:contain;background-image:var(--custom-emoji-background)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{overflow-y:auto;scrollbar-gutter:stable;display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}';const Zt=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji","emojiVersion"],Hr=`:host{--emoji-font-family:${Yt}}`;class bt extends HTMLElement{constructor(e){super(),this.attachShadow({mode:"open"});const t=document.createElement("style");t.textContent=Rr+Hr,this.shadowRoot.appendChild(t),this._ctx={locale:Br,dataSource:Mr,skinToneEmoji:tr,customCategorySorting:or,customEmoji:null,i18n:Fr,emojiVersion:null,...e};for(const o of Zt)o!=="database"&&Object.prototype.hasOwnProperty.call(this,o)&&(this._ctx[o]=this[o],delete this[o]);this._dbFlush()}connectedCallback(){this._cmp||(this._cmp=_r(this.shadowRoot,this._ctx))}disconnectedCallback(){Ve(()=>{if(!this.isConnected&&this._cmp){this._cmp.$destroy(),this._cmp=void 0;const{database:e}=this._ctx;e.close().catch(t=>console.error(t))}})}static get observedAttributes(){return["locale","data-source","skin-tone-emoji","emoji-version"]}attributeChangedCallback(e,t,o){this._set(e.replace(/-([a-z])/g,(a,r)=>r.toUpperCase()),e==="emoji-version"?parseFloat(o):o)}_set(e,t){this._ctx[e]=t,this._cmp&&this._cmp.$set({[e]:t}),["locale","dataSource"].includes(e)&&this._dbFlush()}_dbCreate(){const{locale:e,dataSource:t,database:o}=this._ctx;(!o||o.locale!==e||o.dataSource!==t)&&this._set("database",new Xn({locale:e,dataSource:t}))}_dbFlush(){Ve(()=>this._dbCreate())}}const Qt={};for(const n of Zt)Qt[n]={get(){return n==="database"&&this._dbCreate(),this._ctx[n]},set(e){if(n==="database")throw new Error("database is read-only");this._set(n,e)}};Object.defineProperties(bt.prototype,Qt);customElements.get("emoji-picker")||customElements.define("emoji-picker",bt);W.init();W({parent:".popup-input-container",el:".coloris",theme:"polaroid",themeMode:"dark",alpha:!1,format:"hex",swatchesOnly:!0,swatches:["#1f9a4a","#30d338","#cdcd49","#e93636","#d93e67","#7925d3","#023e8a","#3a14c3","#1d9acf","#04cb85","#bababa","#393b3e"]});const he=class he{static renderInputForm(){const e=document.createElement("div");e.classList.add("popup-wrapper"),e.addEventListener("click",r=>{r.currentTarget===r.target&&r.currentTarget.remove()});const t=document.createElement("form");t.innerHTML=`
			<h1>New Project</h1>
			<div class="popup-flex-container">
				<div class="popup-input-container" style="width:auto">
					<label >Icon</label>
					<div id="newProjectIconContainer"></div>
				</div>
				<div class="popup-input-container">
					<label for="newProjectName">Name*</label>
					<input id="newProjectName" required>
				</div>
			
			</div>
			<div class="popup-input-container">
				<label for="newProjectDescription">Description</label>
				<input id="newProjectDescription">
			</div>
			<div class="popup-input-container" id="newProjectPriorityWrapper"></div>
		`;const o=document.createElement("input");o.classList.add("popup-flex-container"),o.value="Add a Priority",o.type="submit",o.addEventListener("click",r=>{r.preventDefault(),he.addNewPriorityInput()}),t.appendChild(o);const a=document.createElement("input");a.value="Add new Project",a.type="submit",a.addEventListener("click",r=>{if(r.preventDefault(),!t.checkValidity()){t.reportValidity();return}const s=document.querySelector("#newProjectName").value,u=this.tempProject.icon,p=document.querySelector("#newProjectDescription").value||"",f=new Ge(s,p,u),h=document.querySelectorAll(".newPriorityName"),k=document.querySelectorAll(".newPriorityColor");h.forEach((b,w)=>{const I={name:b.value,color:k[w].value};f.priorities=I}),x.projects=f,H.renderToScreen(),document.querySelector("body").removeChild(e)}),t.appendChild(a),e.appendChild(t),document.querySelector("body").appendChild(e),he.renderNewProjectIcon(),he.addNewPriorityInput()}static addNewPriorityInput(){const e=document.querySelectorAll(".popup-priority-container").length+1,t=document.createElement("div");t.classList.add("popup-flex-container"),t.classList.add("popup-priority-container");const o=document.createElement("div");o.classList.add("popup-input-container");const a=document.createElement("label");a.innerHTML=`${e}. Priority Name*`,a.for="newProjectPriorityName"+e;const r=document.createElement("input");r.id="newProjectPriorityName"+e,r.classList.add("newPriorityName"),r.required=!0;const s=document.createElement("div");s.classList.add("popup-input-container");const u=document.createElement("label");u.innerHTML="Color*",u.for="newProjectPriorityColor"+e;const p=document.createElement("input");p.id="newProjectPriorityColor"+e,p.type="text",p.value="#bababa",p.classList.add("newPriorityColor"),p.classList.add("coloris"),document.addEventListener("coloris:pick",f=>{f.detail.currentEl.style.backgroundColor=f.detail.color}),o.appendChild(a),o.appendChild(r),s.appendChild(u),s.appendChild(p),t.appendChild(o),t.appendChild(s),document.querySelector("#newProjectPriorityWrapper").appendChild(t)}static renderNewProjectIcon(){const e=new en().emojiDisplay(this.tempProject);e.id="newProjectIcon";const t=document.querySelector("#newProjectIconContainer");t.innerHTML="",t.appendChild(e)}};Le(he,"tempProject",{icon:"📒"});let Je=he;class en{emojiPicker(e){const t=document.createElement("div");t.classList.add("emoji-wrapper"),t.classList.add("hidden");const o=new bt;return o.addEventListener("emoji-click",a=>{e.icon=a.detail.unicode,t.classList.add("hidden"),H.renderToScreen(),Je.renderNewProjectIcon()}),t.appendChild(o),t}emojiDisplay(e){const t=document.createElement("div");t.classList.add("emoji-display"),e.icon===""?t.innerHTML="📒":t.innerHTML=e.icon;const o=this.emojiPicker(e);return t.appendChild(o),t.addEventListener("click",a=>{a.currentTarget===a.target&&o.classList.toggle("hidden")}),t}}class ut{static renderInputForm(){const e=document.createElement("div");e.classList.add("open-task-wrapper"),e.classList.add("popup-wrapper"),e.addEventListener("click",p=>{p.currentTarget===p.target&&p.currentTarget.remove()});const t=document.createElement("form");t.innerHTML=`
			<div class="popup-flex-container">
				<div id="taskCheckbox" class="checkbox ${this.task.checked?"checked":""}" ></div>
				<h1 class="popup-input-editable" id="taskTitle" contenteditable="true">${this.task.title}</h1>
			</div>
			<div>
				<div class="popup-flex-container" >
					<label for="taskPriority">Priority:</label>
					<select id="taskPriority">
							<option selected>${this.task.priority.name}</option>
							${x.currentProject.priorities.filter(p=>p!==this.task.priority).map(p=>`<option value="${p.name}" style="${p.color}">${p.name}</option>`).join("")}
						</select>
					</div>
				<div class="popup-flex-container">
						<label for="taskDueDate">Due Date:</label>
					<input id="taskDueDate" type="date" value="${this.task.dueDate?this.task.dueDate:""}">
				</div>
			</div>
			<div class="popup-input-editable" id="taskDescription" contenteditable="true">${this.task.description?this.task.description:""}</div>			
		`,e.appendChild(t),document.querySelector("body").appendChild(e);const o=document.querySelector("#taskCheckbox");o.addEventListener("click",p=>{p.stopPropagation(),this.task.state=!this.task.state,H.updateProjectPanel(),o.classList.toggle("checked")}),document.querySelector("#taskTitle").addEventListener("input",p=>{this.task.title=p.target.innerHTML,H.updateProjectPanel()}),document.querySelector("#taskPriority").addEventListener("input",p=>{const f=x.currentProject.priorities.find(h=>h.name===p.target.value);this.task.priority=f,H.updateProjectPanel()}),document.querySelector("#taskDueDate").addEventListener("input",p=>{this.task.dueDate=p.target.value,H.updateProjectPanel()}),document.querySelector("#taskDescription").addEventListener("input",p=>{this.task.description=p.target.innerHTML,H.updateProjectPanel()})}}Le(ut,"task");class zr{constructor(e){this.task=e}renderTaskItem(){const e=document.createElement("div");e.classList.add("task"),this.task.state&&e.classList.add("task-done"),e.addEventListener("click",r=>{ut.task=this.task,ut.renderInputForm()});const t=document.createElement("div");t.classList.add("checkbox"),this.task.checked&&t.classList.add("checked"),t.addEventListener("click",r=>{r.stopPropagation(),this.task.state=!this.task.state,e.classList.toggle("task-done"),t.classList.toggle("checked")});const o=document.createElement("div"),a=document.createElement("span");if(a.classList.add("task-title"),a.innerHTML=this.task.title,o.appendChild(a),this.task.dueDate){const r=document.createElement("p");r.classList.add("due-date"),r.innerHTML=this.task.dueDate,o.appendChild(r)}return e.appendChild(t),e.appendChild(o),e}}W.init();W({parent:".priority-color",el:".coloris",theme:"polaroid",themeMode:"dark",alpha:!1,format:"hex",swatchesOnly:!0,swatches:["#1f9a4a","#30d338","#cdcd49","#e93636","#d93e67","#7925d3","#023e8a","#3a14c3","#1d9acf","#04cb85","#bababa","#393b3e"]});var J;class pt{static renderCurrentProject(){Ce(this,J,x.currentProject);const e=document.createElement("div");e.id="container";const t=document.createElement("div");t.classList.add("title-container");const o=new en().emojiDisplay($(this,J));o.classList.add("project-icon");const a=document.createElement("h1");a.contentEditable=!0,a.innerHTML=$(this,J).title,a.addEventListener("focusout",s=>{x.currentProject.title=s.target.innerHTML,H.updateProjectList()}),t.appendChild(o),t.appendChild(a);const r=document.createElement("p");return r.contentEditable=!0,r.innerHTML=$(this,J).description,r.addEventListener("focusout",s=>{x.currentProject.description=s.target.innerHTML,H.updateProjectList()}),e.appendChild(t),e.appendChild(r),e.appendChild(this.renderProjectPrioritySorted()),e}static renderProjectPrioritySorted(){const e=document.createElement("div");return e.id="priority-sorting",$(this,J).priorities.forEach((t,o)=>{const a=document.createElement("div");a.classList.add("priority"),a.style.backgroundColor=t.color;const r=document.createElement("div");r.classList.add("priority-header");const s=document.createElement("h2");s.innerHTML=t.name,s.contentEditable=!0,s.addEventListener("focusout",h=>{const k={name:h.target.innerHTML,color:t.color};x.currentProject.updatePriority(k,o),H.renderToScreen()});const u=document.createElement("input");u.classList.add("priority-color"),u.classList.add("coloris"),u.addEventListener("change",h=>{const k={name:t.name,color:h.target.value};x.currentProject.updatePriority(k,o),H.renderToScreen()}),r.appendChild(s),r.appendChild(u);const p=document.createElement("div");p.classList.add("priority-items"),$(this,J).tasks.filter(h=>h.priority.name===t.name).forEach(h=>{const b=new zr(h).renderTaskItem();p.appendChild(b)}),a.appendChild(r),a.appendChild(p),e.appendChild(a)}),e}}J=new WeakMap,ee(pt,J,x.currentProject);class ze{static saveProjects(){localStorage.clear(),x.projects.forEach((t,o)=>{localStorage.setItem(`project-${o}-title`,JSON.stringify(t.title)),localStorage.setItem(`project-${o}-description`,JSON.stringify(t.description)),localStorage.setItem(`project-${o}-icon`,JSON.stringify(t.icon)),t.priorities.forEach((a,r)=>{localStorage.setItem(`priorities-${o}-${r}-name`,JSON.stringify(a.name)),localStorage.setItem(`priorities-${o}-${r}-color`,JSON.stringify(a.color))}),t.tasks.forEach((a,r)=>{localStorage.setItem(`tasks-${o}-${r}-title`,JSON.stringify(a.title)),localStorage.setItem(`tasks-${o}-${r}-priorityName`,JSON.stringify(a.priority.name)),a.description&&localStorage.setItem(`tasks-${o}-${r}-description`,JSON.stringify(a.description)),a.state&&localStorage.setItem(`tasks-${o}-${r}-state`,JSON.stringify(a.state)),a.dueDate&&localStorage.setItem(`tasks-${o}-${r}-dueDate`,JSON.stringify(a.dueDate))})})}static loadProjects(){let e=0;for(;localStorage.getItem(`project-${e}-title`);){const t=new Ge(JSON.parse(localStorage.getItem(`project-${e}-title`)),JSON.parse(localStorage.getItem(`project-${e}-description`)),JSON.parse(localStorage.getItem(`project-${e}-icon`)));let o=0;for(;localStorage.getItem(`priorities-${e}-${o}-name`);){const r={name:JSON.parse(localStorage.getItem(`priorities-${e}-${o}-name`)),color:JSON.parse(localStorage.getItem(`priorities-${e}-${o}-color`))};t.priorities=r,o++}let a=0;for(;localStorage.getItem(`tasks-${e}-${a}-title`);){const r=JSON.parse(localStorage.getItem(`tasks-${e}-${a}-priorityName`)),s=t.priorities.find(p=>p.name===r),u=new se(JSON.parse(localStorage.getItem(`tasks-${e}-${a}-title`)),JSON.parse(localStorage.getItem(`tasks-${e}-${a}-description`)),s);u.state=JSON.parse(localStorage.getItem(`tasks-${e}-${a}-state`)),u.dueDate=JSON.parse(localStorage.getItem(`tasks-${e}-${a}-dueDate`)),t.tasks=u,a++}x.projects=t,e++}}}class Ur{static renderStaticButton(){const e=document.createElement("img");return e.classList.add("addProjectBtn"),e.classList.add("addBtn"),e.src=Dt,e.addEventListener("click",()=>{Je.renderInputForm()}),e}}class H{static pushNewTask(e){const t=x.currentProject;t.tasks=e,pt.project=t,this.renderToScreen()}static run(){if(ze.loadProjects(),x.projects.length===0){const e=new Ge("Main Project","This is my main project page","👌"),t=new Ge("Private Project","This is private","🔒"),o=[{name:"Asap",color:"#e93636"},{name:"Medium",color:"#cdcd49"},{name:"Soon",color:"#30d338"},{name:"None",color:"#bababa"}],a=[{name:"Soon",color:"#30d338"},{name:"None",color:"#bababa"}];o.forEach(h=>{e.priorities=h}),a.forEach(h=>{t.priorities=h});const r=new se("First Task","Finish the Odin Project",e.priorities[0]),s=new se("Second Task","Get stuff done my friends",e.priorities[1]),u=new se("Finish dishes","Do the damn dishes!",e.priorities[2]),p=new se("Feed fishes","Blub blub",e.priorities[2]),f=new se("Eat cake","But the cake is a lie!",t.priorities[1]);s.state=!0,u.dueDate=new Date(2025,3,21).toLocaleString(),e.tasks=r,e.tasks=s,e.tasks=u,e.tasks=p,t.tasks=f,x.projects=e,x.projects=t,ze.saveProjects()}this.renderToScreen()}static renderToScreen(){this.updateProjectList(),this.updateProjectPanel(),document.querySelector("#app").appendChild(Nt.renderStaticButton()),document.querySelector("#app").appendChild(Ur.renderStaticButton())}static updateProjectList(){ze.saveProjects();const e=document.querySelector("aside");e.innerHTML="",e.appendChild(Ot.renderProjectsList())}static updateProjectPanel(){ze.saveProjects();const e=document.querySelector("main");e.innerHTML="",e.appendChild(pt.renderCurrentProject())}}H.run();
